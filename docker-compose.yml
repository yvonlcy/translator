services:
  translator:
    image: gitlab.kryedu.org:5050/ai-developer/translator:latest
    container_name: translator
    restart: unless-stopped
    tty: true
    stdin_open: true
    environment:
      - GRADIO_SERVER_NAME=0.0.0.0
      - GRADIO_SERVER_PORT=7861
      - GRADIO_ROOT_PATH=/translator
      - PYTHONUNBUFFERED=1
      - OLLAMA_BASE_URL=http://ollama:11434
    volumes:
      - ~/docker/translator/log:/app/log
      - ~/docker/translator/outputs:/app/outputs
      - ~/docker/translator/cache:/root/.cache
    labels:
      - traefik.enable=true
      - traefik.http.routers.translator.rule=PathPrefix(`/translator`)
      - traefik.http.routers.translator.entrypoints=websecure
      - traefik.http.routers.translator.tls=true
      - traefik.http.routers.translator.tls.certresolver=myresolver
      - traefik.http.routers.translator.service=translator
      - traefik.http.services.translator.loadbalancer.server.port=7861
    networks:
      - traefik

networks:
  traefik:
    external: true
